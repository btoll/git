#!/bin/bash
# https://osdir.com/ml/git/2009-01/msg00298.html

# Try for local hooks first.
HOOKS=$(git config --get-all --local hooks.pre-commit.hook)

if [ -z "$HOOKS" ]; then
    HOOKS=$(git config --get-all --global hooks.pre-commit.hook)
fi

if [ -n "$HOOKS" ]; then
    for HOOK in $HOOKS; do
        bash ./.git/hooks/pre-commit.d/"$HOOK"

        if [ "$?" -eq 1 ]; then
            exit 1
        else
            # Separate the hooks by an empty line.
            echo
        fi
    done
fi

